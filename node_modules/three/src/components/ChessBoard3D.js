import React, { useRef, useState } from "react";
import { Canvas } from "@react-three/fiber";
import { OrbitControls } from "@react-three/drei";
import * as THREE from "three";
import { Chess } from "chess.js";

const ChessBoard3D = () => {
  const [game] = useState(new Chess());
  const boardRef = useRef();

  const boardSize = 8;
  const tileSize = 1;

  // Function to create chessboard squares
  const createBoard = () => {
    const squares = [];
    for (let x = 0; x < boardSize; x++) {
      for (let y = 0; y < boardSize; y++) {
        const color = (x + y) % 2 === 0 ? "#EEE" : "#333";
        squares.push(
          <mesh key={`${x}-${y}`} position={[x - 3.5, 0, y - 3.5]}>
            <boxGeometry args={[tileSize, 0.1, tileSize]} />
            <meshStandardMaterial color={color} />
          </mesh>
        );
      }
    }
    return squares;
  };

  return (
    <Canvas camera={{ position: [0, 5, 10], fov: 50 }}>
      <ambientLight intensity={0.5} />
      <pointLight position={[10, 10, 10]} />
      <group ref={boardRef}>{createBoard()}</group>
      <OrbitControls />
    </Canvas>
  );
};

export default ChessBoard3D;
